<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond&family=Khula&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
    <title>Sarah Barrett Artist</title>
</head>

<body>
    <div class="banner col-12">
        <h1 class="bannerText">Sarah Barrett Artist</h1>
    </div>
<!-- HTML for the navbar -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid ms-3">
            <i class="fa-solid fa-palette"></i>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="home.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <!-- Portfolio page is "current" -->
                        <a class="nav-link active" aria-current="page" href="portfolio.html">Portfolio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Shop</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
<!-- HTML structure for the search bar and category filter: -->
        <div class="container mt-3">
            <div class="row">
                <div class="col-md-6 my-2">
                    <input type="text" id="searchInput" class="form-control" placeholder="Search for items...">
                    <!-- Add the html structure for the search input. using bootstrap form-control -->
                </div>
                <div class="col-md-6 my-2">
                    <select id="categorySelect" class="form-select">
                        <!-- Using bootdtap form-select class  -->
                        <option value="all" selected>Show all categories</option>
                        <option value="Painting">Paintings</option>
                        <option value="Sculpture">Sculptures</option>
                    </select>
                </div>
            </div>
        </div>
<!-- HTML for the cards template: -->
        <template id="card-template">
            <!-- Using bootstrap to make the cards responsive: -->
            <div class="card col-sm-12 col-md-6 col-lg-3 my-4 mx-lg-5 mx-sm-3">
                <div>
                    <div class="card-body text-center">
                        <div class="category-icons" id="icons"></div>
                        <div class="card-title"></div>
                        <div class="card-text"></div>
                        <div class="card-image"></div>
                        <!-- Create a button to start the modal bootstrap pop up: -->
                        <button type="button" class="btn mt-3 view-details" data-bs-toggle="modal">
                            View more
                        </button>
                    </div>
                </div>
            </div>
        </template>
    <div class="row" id="card-list"></div>

    <!-- HTML for the bootstrap modal template: -->
<div class="modal fade" id="modalTemplate" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="modalLabel">More Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <h4 id="modal-title"></h4>
            <p id="modal-text"></p>
            <!-- Add the image carousel for the modal pop up: -->
            <img src="" id="modal-image" class="img-fluid" alt="Item Image">
            <div id="additionalImagesCarousel" class="carousel slide mt-4" data-bs-ride="carousel">
                <div class="carousel-inner">
                </div>
            </div>
        </div>
    </div>
</div>
</div>


<script>
    // Create an array of objects which contains the data for the portfolio cards:
    const art = [
            {
                title: "Barry the Bull",
                text: "Barry the Bull is an arcrylic painting",
                modalText: "This is the longer text for Barry the Bull",
                src: "/images/Bullpainting.jpeg",
                category: "Painting",
                // Create an array to contain the additional images for the carousel:
                additionalImages: ["/images/Bullpainting2.JPG", "/images/Bullpainting3.JPG", "/images/bullpainting5.JPG"]
            },
            {
                title: "Mountains of Home",
                text: "Picturesque view from my front window",
                modalText: "This is the longer text for the Mountains painting",
                src: "/images/mountains.JPG",
                category: "Painting",
                additionalImages: ["/images/mountains2.JPG"]
            },
            {
                title: "Tui",
                text: "Large Tui on canvas",
                modalText: "This is the longer text for the Tui",
                src: "/images/Tui.JPG",
                category: "Painting",
                additionalImages: []
            },
            {
                title: "Daisies",
                text: "Daisies",
                modalText: "This is the longer text for the Daisies",
                src: "/images/daisy.PNG",
                category: "Painting",
                additionalImages: []
            },
            {
                title: "Abstract",
                text: "Coloured abstract on large canvas",
                modalText: "This is the longer text for the Abstract painting",
                src: "/images/abstract.JPG",
                category: "Painting",
                additionalImages: ["/images/abstract2.JPG"]
            },
            {
                title: "Harry the Hare",
                text: "Clay sculpture, indoor or outdoor",
                modalText: "This is the longer text for Harry the Hare",
                src: "/images/hare.jpg",
                category: "Sculpture",
                additionalImages: ["/images/hare2.jpg"]
            },
            {
                title: "Poppies",
                text: "Clay sculpture for in the garden",
                modalText: "This is the longer text for the Poppies",
                src: "/images/poppies.jpg",
                category: "Sculpture",
                additionalImages: ["/images/poppies2.jpg", "/images/poppies3.JPG"]
            }
        ]
            // Javascript to populate the cards:
        const cardList = document.querySelector('#card-list');

        function addCards(item) { // function to add cards 

            const template = document.getElementById("card-template").content.cloneNode(true); // clone the html template and store in template variable
            const container = template.querySelector('.card'); // store the class card from the template in the container variable

            template.querySelector('.card-title').innerText = item.title; // make the card title the card title
            template.querySelector('.card-text').innerText = item.text; // Make the card text the text of the card

         
            const image = document.createElement('img'); // create an image element for each card
            image.src = item.src; // source is the src
            image.alt = item.title; // alt text is the title of the art work 
            template.querySelector('.card-image').appendChild(image); // images are appended to the card-image html element 

            // Add the icons from the font-awesome library to each card depending on their category:
            const categoryIcons = template.querySelector('.category-icons'); // Select the category-icons html element to store the categoryIcons
            if(item.category === 'Painting') { // if the category is "Painting" this condition is met
                const paintingIcon =  document.createElement('i'); //Create the element i for the icon
                paintingIcon.classList.add('fas', 'fa-paint-brush', 'painting-icon'); // Add the fa-paint-brush icon to the i element
                paintingIcon.style.float = 'left'; // Make the icon float to the left hand side of the card
                categoryIcons.appendChild(paintingIcon) // add the painting icon to categoryIcons
            } else { // if the above condition is not met, the following code will run:
                const sculptureIcon = document.createElement('i');  // create the element i for the icon
                sculptureIcon.classList.add('fas', 'fa-mountain', 'sculpture-icon'); // add the fa-mountain icon
                sculptureIcon.style.float = 'left'; // float the icon to the left of the card
                categoryIcons.appendChild(sculptureIcon) // add the icon to categoryIcons 
            }
           cardList.appendChild(container); // add each card to the card list
        }

        art.forEach((item) => { // call the add card function for each item, adding multiple cards 
            addCards(item);
        });



        // Javascript for the search field and filter categories:
        // Select the HTML elements:
        const searchInput = document.getElementById('searchInput');
        const categorySelect = document.getElementById('categorySelect');
        const cards = document.getElementById('card-list');

        // Add event listeners so that when the user interacts with the search and filter things the functions are called
        // When the user inputs something into the search field the filterPortfolio is called
        searchInput.addEventListener('input', filterPortfolio);
        // When the user changes the category in the filter thing; filterPortfolio will be called
        categorySelect.addEventListener('change', filterPortfolio);

        function filterPortfolio() {
            // extract the search term (toLowerCase to ensure the search is found) .trim() removes any white spaces, line breaks or tabs so the search is accurate
            const searchTerm = searchInput.value.toLowerCase().trim();        
            const selectedCategory = categorySelect.value;      
            cardList.innerHTML = "";        // clear the contents of the cardList

            art.forEach((item) => { //iterate over the art array
                const cardTitle = item.title.toLowerCase(); // convert the title to lowercase so the search is found even if the user uses capitals or not 
                const cardCategory = item.category.toLowerCase(); // convert the category to lowercase 

                const titleMatch = cardTitle.includes(searchTerm); // if the title includes the search term
                const categoryMatch = selectedCategory === "all" || item.category === selectedCategory; // if the selected category is all OR if the category of the item matches the selected category

                if (titleMatch && categoryMatch) { // if both conditions above are met, the addCards function is called and the selected cards are displayed 
                    addCards(item);
                }
            });
        }
        // call the filterPortfolio function when the page loads 
        filterPortfolio();

        // Javascript for the modal:

        document.querySelectorAll('.view-details').forEach((button, index) => {
            // Select the view-details buttons (iterate over the buttons as there are mutliple - on each portfolio card)
            button.addEventListener('click', () => { // add an event listener to the button, the function will be called when the button is clicked
                const item = art[index]; //retrieve the data associated with the art array associated with the index (the card of the button just clicked)

                // Update the content of the modal with the information depending on the selected item
                const modal = document.getElementById('modalTemplate');
                modal.querySelector('#modal-title').textContent = item.title;
                modal.querySelector('#modal-text').textContent = item.modalText;
                // The main image is the same image as on the portoflio card:
                modal.querySelector('#modal-image').src = item.src;

                // Clear the content of the modal to prepare for displaying the additional images:
                const carouselInner = modal.querySelector('.carousel-inner');
                carouselInner.innerHTML = '';

                // iterate through the additional images array 
                item.additionalImages.forEach((imgURL, imgIndex) => {
                    const carouselItem = document.createElement('span'); // create a span element to house the carousel items
                    carouselItem.classList.add('.carousel-item'); // add each carousel item
                    if(imgIndex === 0) { //if the image is the first image then this condition is met
                        // the active class is added to the first carousel item so that it is displayed initially
                        carouselItem.classList.add('active');
                    }
                    const img = document.createElement('img'); //Create a new image element

                    img.src = imgURL; //set the src of the image as the imgURL
                    img.alt = item.title + 'Image' + (imgIndex + 1); // create a descriptive alternative text for each image
                    
 
                    carouselItem.appendChild(img); // append the img to the carouselItem
                    carouselInner.appendChild(carouselItem); // append the carouselItem to the carouselInner
                })

                // Create a new instance of a bootstrap modal
                const modalInstance = new bootstrap.Modal(modal);
                // When the button is clicked, the modal is disaplayed
                modalInstance.show();
            });
        });
</script>
</body>
</html>